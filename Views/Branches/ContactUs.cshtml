
@{
    ViewData["Title"] = "Contact Us";
}
@model IEnumerable<ApplicationDevelopmentCourseProject.Models.Branch>



<html>
<head>
    <script src="https://maps.googleapis.com/maps/api/js?"></script>
</head>
<body>
    <p>Use this page to contact us and see the shop branches.</p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.BranchName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.XCoordinate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.YCoordinate)
            </th>
            <th></th>
        </tr>
        @if (Model != null)
        {
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.BranchName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.XCoordinate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.YCoordinate)
                    </td>
                </tr>
            }
        }
    </table>

    <div id="branchesMap" style="width:100%;height:400px;"></div>
</body>
</html>

<script type="text/javascript">
        var map;
        var Latitude, Longitude;
        var markersArray = [];
        var branches = @Json.Serialize(Model);
        console.log(branches);
        function initialize() {
            var myLatlng1 = new google.maps.LatLng(branches[0].xCoordinate, branches[0].yCoordinate);

            var mapOptions = {
                zoom: 15,
                center: myLatlng1,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById('branchesMap'),
                mapOptions);

            initialLocation = new google.maps.LatLng(branches[0].xCoordinate, branches[0].yCoordinate);
            map.setCenter(initialLocation);

            var marker = new google.maps.Marker({
                position: myLatlng1,
            });
            marker.setMap(map);
            var marker = new google.maps.Marker({
                position: initialLocation,
                map: map,
                title: "You are here!"
            });

            getLocations();

    };
    function getLocations() {

        for (i = 0; i < branches.length; i++) {
            PlotMarker(branches[i].xCoordinate, branches[i].yCoordinate)
        }
    }
    function PlotMarker(Lat, Long) {
        var marker1 = new google.maps.Marker({
            position: new google.maps.LatLng(Lat, Long),
            map: map,
            draggable: false,
            animation: google.maps.Animation.DROP
        });
        markersArray.push(marker1);
    }
    google.maps.event.addDomListener(window, "load", initialize);
            @*function DisplayGoogleMap() {



                //Set the Latitude and Longitude of the Map
                var mainBranch = new google.maps.LatLng(32.1308798, 35.0035587);

               //Create Options or set different Characteristics of Google Map
                var mapOptions = {
                    center: mainBranch,
                    zoom: 1,
                    minZoom: 15,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                //Display the Google map in the div control with the defined Options
                var map = new google.maps.Map(document.getElementById("myDiv"), mapOptions);


                var marker, i;

                for (i = 0; i < branches.length; i++) {
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(branches[i].xCoordinate, branches[i].yCoordinate),
                        map: map
                    });
                }

                ////Set Marker on the Map
                //var marker = new google.maps.Marker({
                //    position: myAddress,
                //    animation: google.maps.Animation.BOUNCE,
                //});

                //marker.setMap(map);
            }*@
</script>

